<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мини-игра - Угадай населенный пункт</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            max-width: 600px;
            text-align: center;
        }
        h1 {
            color: #333;
        }
        .question, .progress, .result {
            font-size: 20px;
            margin-bottom: 20px;
        }
        .start-buttons, .answer-buttons, .control-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .start-buttons button, .answer-buttons button {
            padding: 10px;
            width: 30%;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .correct {
            background-color: #4caf50;
            color: white;
        }
        .incorrect {
            background-color: #f44336;
            color: white;
        }
        .control-buttons button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
        }
        .control-buttons button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Угадай населенный пункт</h1>
    <div class="question">Выберите населенный пункт для начала игры</div>
    <div class="start-buttons">
        <button onclick="startGame('Чинадійово')">Чинадійово</button>
        <button onclick="startGame('Кольчино')">Кольчино</button>
        <button onclick="startGame('Ракошино')">Ракошино</button>
        <button onclick="startGame('Іванівці')">Іванівці</button>
        <button onclick="startGame('Страбичово')">Страбичово</button>
        <button onclick="startGame('Зняцьово')">Зняцьово</button>
    </div>
    <div class="answer-buttons" style="display: none;">
        <button onclick="checkAnswer(this)">Ответ 1</button>
        <button onclick="checkAnswer(this)">Ответ 2</button>
        <button onclick="checkAnswer(this)">Ответ 3</button>
    </div>
    <div class="progress"></div>
    <div class="control-buttons">
        <button onclick="restartGame()">Начать сначала</button>
        <button onclick="returnToMenu()">Вернуться к списку</button>
    </div>
</div>

<script>
    const locations = {
        "Чинадійово": ["Чинадійово", "Косино", "Лецовиця", "Карпати", "Вільховиця", "Обавва", "Бистриця"],
        "Кольчино": ["Кольчино", "Лісарня", "Клочки", "Кленовець", "Верхня Визниця"],
        "Ракошино": ["Ракошино", "Руське", "Чопівці", "Кайданово", "Кальник", "Бенедиківці"],
        "Іванівці": ["Клячаново", "Лавки", "Іванівці", "Лохово", "Бобовище", "Старе Давидково", "Жуково"],
        "Страбичово": ["Жнятино", "Велика Добронь", "Горонда", "Батьово", "Есень", "Чомонин", "Серне", "Баркасово", "Тисауйфалу", "Мала Добронь", "Червоне", "Тисаагтелек", "Соловка", "Петрівка", "Демечі", "Свобода", "Данилівка", "Страбичово"],
        "Зняцьово": ["Зняцьово"]
    };

    let selectedLocation = null;
    let questionOrder = [];
    let currentQuestionIndex = 0;
    let score = 0;

    function startGame(location) {
        if (locations[location].length < 2) {
            alert(`Недостаточно населенных пунктов для игры в ${location}.`);
            return;
        }
        
        selectedLocation = location;
        questionOrder = shuffleArray(locations[location]);
        currentQuestionIndex = 0;
        score = 0;
        
        updateUIForGame();
        loadQuestion();
    }

    function loadQuestion() {
        resetButtonColors();
        if (currentQuestionIndex < questionOrder.length) {
            document.querySelector('.question').innerText = `Выберите правильный населённый пункт для '${selectedLocation}'`;
            document.querySelector('.progress').innerText = `Прогресс: ${selectedLocation} - ${currentQuestionIndex + 1} из ${questionOrder.length}`;

            const correctAnswer = questionOrder[currentQuestionIndex];
            const wrongOptions = getWrongOptions(correctAnswer, 2);
            const answerOptions = shuffleArray([correctAnswer, ...wrongOptions]);

            document.querySelectorAll('.answer-buttons button').forEach((button, index) => {
                button.innerText = answerOptions[index];
                button.onclick = () => checkAnswer(button, correctAnswer);
            });
        } else {
            finishGame();
        }
    }

    function checkAnswer(button, correctAnswer) {
        button.classList.add(button.innerText === correctAnswer ? 'correct' : 'incorrect');
        if (button.innerText === correctAnswer) score++;
        
        document.querySelectorAll('.answer-buttons button').forEach(btn => btn.onclick = null);
        
        setTimeout(() => {
            currentQuestionIndex++;
            loadQuestion();
        }, 1000);
    }

    function finishGame() {
        document.querySelector('.question').innerText = `Игра завершена! Ваш счёт: ${score} из ${questionOrder.length}`;
        document.querySelector('.progress').innerText = '';
        document.querySelector('.answer-buttons').style.display = 'none';
        document.querySelector('.start-buttons').style.display = 'none';
    }

    function restartGame() {
        currentQuestionIndex = 0;
        score = 0;
        loadQuestion();
    }

    function returnToMenu() {
        document.querySelector('.question').innerText = 'Выберите населенный пункт для начала игры';
        document.querySelector('.progress').innerText = '';
        document.querySelector('.answer-buttons').style.display = 'none';
        document.querySelector('.start-buttons').style.display = 'flex';
        selectedLocation = null;
    }

    function getWrongOptions(correctAnswer, count) {
        const allOptions = Object.values(locations).flat().filter(option => option !== correctAnswer);
        return shuffleArray(allOptions).slice(0, count);
    }

    function shuffleArray(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function resetButtonColors() {
        document.querySelectorAll('.answer-buttons button').forEach(btn => {
            btn.classList.remove('correct', 'incorrect');
        });
    }

    function updateUIForGame() {
        document.querySelector('.start-buttons').style.display = 'none';
        document.querySelector('.answer-buttons').style.display = 'flex';
    }
</script>
</body>
</html>
